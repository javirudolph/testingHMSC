---
title: "Visualizing VP"
author: "Javiera Rudolph"
date: "February 15, 2019"
output: github_document
---
We will use thi document to explore alternatives to visualizing the data. As an example I will use the data for scenario 1 Figure2a. The RDS file needed to run this markdown document needs to be in the same directory for this to work. 

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

```{r loadVPdata}
VPdata <- readRDS("VP Fig2a.RDS")
```

Create a function that will calculate that dataframe needed for each item on the list, so then you can just use the funciton on each item of the list, you have the dataframes you want and bind them together. 


```{r tidyVPdata}
VPdata[[1]] %>% 
  map(as_tibble) %>% 
  bind_cols() %>% 
  set_names(c("c", "b", "a", "e", "f", "d", "g")) %>% 
  transmute(env = a + f + 0.5 * d + 0.5 * g,
         spa = b + e + 0.5 * d + 0.5 * g,
         codist = g, 
         r2 = env + spa + codist,
         iter = paste0("niter") )


vptidy <- function(lista){
  lista %>% 
    map(as_tibble) %>% 
    bind_cols() %>% 
    set_names(c("c", "b", "a", "e", "f", "d", "g")) %>% 
    transmute(env = a + f + 0.5 * d + 0.5 * g,
         spa = b + e + 0.5 * d + 0.5 * g,
         codist = g, 
         r2 = env + spa + codist)
}


```




```{r}

data <- VPdata[[1]] %>% map(., as_tibble)

VPdata %>% map_dfr("overlap1")


VPdata[[1]] %>% 
  set_names()
  map(as_tibble) %>% 
  bind_cols() %>% 
  set_names(c("c", "b", "a", "e", "f", "d", "g")) %>% 
  transmute(env = a + f + 0.5 * d + 0.5 * g,
         spa = b + e + 0.5 * d + 0.5 * g,
         codist = g, 
         r2 = env + spa + codist)

funcs <- function(lista) {
  lista %>% 
  map(as_tibble) %>% 
    bind_cols() %>% 
    set_names(c("c", "b", "a", "e", "f", "d", "g")) %>% 
    transmute(env = a + f + 0.5 * d + 0.5 * g,
           spa = b + e + 0.5 * d + 0.5 * g,
           codist = g, 
           r2 = env + spa + codist)
}

VPdata %>% set_names(paste("iter", 1:length(VPdata))) %>% map(funcs)
```

